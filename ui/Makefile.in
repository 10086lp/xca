#
#  @configure_input@
#
# $Id$

VERSION=@PACKAGE_VERSION@
TARGET=xca-$(VERSION)

GCC=@CXX@
CC=@CC@

MOC=@MOC@
UIC=@UIC@

AR=@AR@
RANLIB=@RANLIB@

CPPFLAGS=-I.. -I../widgets -I../view @CPPFLAGS@ @DEFS@
CFLAGS=@ac_CC_WARN@ @ac_DEBUG@

##############################################

UINAMES=CertDetail ExportKey ExportCert KeyDetail MainWindow \
        NewKey NewX509 PassRead PassWrite ReqDetail TrustState \
        CertExtend ExportTinyCA CrlDetail #ImportMulti

UIOBJS=$(patsubst %,moc_%.o,$(UINAMES)) $(patsubst %,%.o,$(UINAMES))

MOC_CPP=$(patsubst %,moc_%.cpp,$(MOCNAMES))
UI_CPP=$(patsubst %, %.cpp, $(UINAMES))
UI_H=$(patsubst %, %.h, $(UINAMES))

all: ui.o

ui.o: $(UIOBJS) 
	$(LD) -r $(UIOBJS) -o $@

%.o: %.cpp 
	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
clean:
	rm -rf *~ *.o *.a $(UI_CPP) $(UI_H) $(MOC_CPP)  

distclean: clean
	rm -f Makefile base.h

moc_%.cpp: %.h %.cpp
	$(MOC) $< -o $@
%.h: %.ui
	$(UIC) -o $@ $<

%.cpp: %.h %.ui
	$(UIC) -o $@ -impl $^

.SECONDARY: $(UI_CPP) $(UI_H) $(MOC_CPP)  
