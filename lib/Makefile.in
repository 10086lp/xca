#
#  @configure_input@
#
# $Id$

VERSION=@PACKAGE_VERSION@
TARGET=xca-$(VERSION)

GCC=@CXX@
CPPFLAGS=@CPPFLAGS@ @DEFS@ -Wall -g
MOC=@MOC@

##############################################


PKIOBJS=pki_base.o pki_key.o pki_x509req.o pki_x509.o pki_pkcs12.o pki_temp.o
DBOBJS=db_base.o db_key.o db_x509req.o db_x509.o db_temp.o moc_db_key.o moc_db_x509req.o moc_db_x509.o moc_db_temp.o
     

all: libpki.a libxcadb.a

libpki.a: $(PKIOBJS)
	ar rcs libpki.a $(PKIOBJS)

libxcadb.a: $(DBOBJS)
	ar rcs libxcadb.a $(DBOBJS)
	
%.o: %.cpp 
	$(GCC) $(CPPFLAGS) -c $(INC) -DVER=\"$(VERSION)\" -DPREFIX=\"@prefix@/share/xca\" $<

clean:
	rm -rf *~ *.o *.a moc_*.cpp

distclean: clean
	rm -f Makefile

moc_%.cpp: %.h %.cpp
	$(MOC) $< -o $@
