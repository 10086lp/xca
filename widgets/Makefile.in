#
#  @configure_input@
#
# $Id$

VERSION=@PACKAGE_VERSION@
TARGET=xca-$(VERSION)

GCC=@CXX@
CC=@CC@

MOC=@MOC@
UIC=@UIC@

AR=@AR@
RANLIB=@RANLIB@

CPPFLAGS=-I.. @CPPFLAGS@ @DEFS@
CFLAGS=@ac_CC_WARN@ @ac_DEBUG@

##############################################

MOC_NAMES= ExportCert ExportKey ExportTinyCA NewX509 CrlDetail CertDetail \
	MainWindow validity distname ReqDetail clicklabel
NAMES=$(MOC_NAMES) NewX509_ext

OBJS=$(patsubst %,moc_%.o,$(MOC_NAMES)) $(patsubst %,%.o,$(NAMES))

MOC_CPP=$(patsubst %,moc_%.cpp,$(MOC_NAMES))

all: widgets.o

widgets.o: $(OBJS) 
	$(LD) -r -o $@ $(OBJS)

%.o: %.cpp 
	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
clean:
	rm -rf *~ *.o *.a $(MOC_CPP)  

distclean: clean
	rm -f Makefile 

moc_%.cpp: %.h %.cpp
	$(MOC) $< -o $@

.SECONDARY: $(MOC_CPP)  
